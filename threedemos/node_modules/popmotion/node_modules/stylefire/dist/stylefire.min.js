!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("tslib"),require("framesync"),require("style-value-types"),require("hey-listen")):"function"==typeof define&&define.amd?define(["exports","tslib","framesync","style-value-types","hey-listen"],r):r((e=e||self).stylefire={},e.tslib,e.framesync,e.valueTypes,e.heyListen)}(this,function(e,y,f,n,a){"use strict";f=f&&f.hasOwnProperty("default")?f.default:f;function r(e){var t=e.onRead,r=e.onRender,n=e.uncachedValues,l=void 0===n?new Set:n,o=e.useCache,u=void 0===o||o;return function(e){void 0===e&&(e={});var n=y.__rest(e,[]),o={},a=[],i=!1;function s(e,r){e.startsWith("--")&&(n.hasCSSVariable=!0);var t=o[e];o[e]=r,o[e]!==t&&(-1===a.indexOf(e)&&a.push(e),i||(i=!0,f.render(d.render)))}var d={get:function(e,r){return void 0===r&&(r=!1),!r&&u&&!l.has(e)&&void 0!==o[e]?o[e]:t(e,n)},set:function(e,r){if("string"==typeof e)s(e,r);else for(var t in e)s(t,e[t]);return this},render:function(e){return void 0===e&&(e=!1),!i&&!0!==e||(r(o,n,a),i=!1,a.length=0),this}};return d}}function i(e,r){return l.set(e,b(r))}var s,t=/([a-z])([A-Z])/g,b=function(e){return e.replace(t,"$1-$2").toLowerCase()},d=new Map,l=new Map,u=["Webkit","Moz","O","ms",""],c=u.length,o="undefined"!=typeof document,h=function(e,r){void 0===r&&(r=!1);var t,n=r?l:d;return n.has(e)||(o?function(e){s=s||document.createElement("div");for(var r=0;r<c;r++){var t=u[r],n=""===t,o=n?e:t+e.charAt(0).toUpperCase()+e.slice(1);if(o in s.style||n){if(n&&"clipPath"===e&&l.has(e))return;d.set(e,o),i(e,(n?"":"-")+b(o))}}}(e):i(t=e,t)),n.get(e)||e},p=["","X","Y","Z"],v=["translate","scale","rotate","skew","transformPerspective"].reduce(function(e,t){return p.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),g=v.reduce(function(e,r){return e[r]=!0,e},{});function m(e){return!0===g[e]}function x(e,r){return v.indexOf(e)-v.indexOf(r)}var w=new Set(["originX","originY","originZ"]);var S=y.__assign(y.__assign({},n.number),{transform:Math.round}),O={color:n.color,backgroundColor:n.color,outlineColor:n.color,fill:n.color,stroke:n.color,borderColor:n.color,borderTopColor:n.color,borderRightColor:n.color,borderBottomColor:n.color,borderLeftColor:n.color,borderWidth:n.px,borderTopWidth:n.px,borderRightWidth:n.px,borderBottomWidth:n.px,borderLeftWidth:n.px,borderRadius:n.px,radius:n.px,borderTopLeftRadius:n.px,borderTopRightRadius:n.px,borderBottomRightRadius:n.px,borderBottomLeftRadius:n.px,width:n.px,maxWidth:n.px,height:n.px,maxHeight:n.px,size:n.px,top:n.px,right:n.px,bottom:n.px,left:n.px,padding:n.px,paddingTop:n.px,paddingRight:n.px,paddingBottom:n.px,paddingLeft:n.px,margin:n.px,marginTop:n.px,marginRight:n.px,marginBottom:n.px,marginLeft:n.px,rotate:n.degrees,rotateX:n.degrees,rotateY:n.degrees,rotateZ:n.degrees,scale:n.scale,scaleX:n.scale,scaleY:n.scale,scaleZ:n.scale,skew:n.degrees,skewX:n.degrees,skewY:n.degrees,distance:n.px,translateX:n.px,translateY:n.px,translateZ:n.px,x:n.px,y:n.px,z:n.px,perspective:n.px,opacity:n.alpha,originX:n.progressPercentage,originY:n.progressPercentage,originZ:n.px,zIndex:S,fillOpacity:n.alpha,strokeOpacity:n.alpha,numOctaves:S},T=function(e){return O[e]},k=function(e,r){return r&&"number"==typeof e?r.transform(e):e},C="scrollLeft",R="scrollTop",L=new Set([C,R]),X=new Set([C,R,"transform"]),Y={x:"translateX",y:"translateY",z:"translateZ"};function _(e){return"function"==typeof e}function A(e,r,t,n,o,a,i,s){void 0===r&&(r=!0),void 0===t&&(t={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===a&&(a=[]),void 0===i&&(i=!1),void 0===s&&(s=!0);var d,l=!0,u=!1,f=!1;for(var c in e){var p=e[c],v=T(c),g=k(p,v);m(c)?(u=!0,n[c]=g,a.push(c),l&&(v.default&&p!==v.default||!v.default&&0!==p)&&(l=!1)):(d=c,w.has(d)?(o[c]=g,f=!0):X.has(c)&&_(g)||(t[h(c,i)]=g))}return!u&&"function"!=typeof e.transform||(t.transform=function(e,r,t,n,o,a){void 0===a&&(a=!0);var i="",s=!1;t.sort(x);for(var d=t.length,l=0;l<d;l++){var u=t[l];i+=(Y[u]||u)+"("+r[u]+") ",s="z"===u||s}return!s&&o?i+="translateZ(0)":i=i.trim(),_(e.transform)?i=e.transform(r,n?"":i):a&&n&&(i="none"),i}(e,n,a,l,r,s)),f&&(t.transformOrigin=(o.originX||"50%")+" "+(o.originY||"50%")+" "+(o.originZ||0)),t}function B(e){var r=void 0===e?{}:e,t=r.enableHardwareAcceleration,n=void 0===t||t,o=r.isDashCase,a=void 0===o||o,i=r.allowTransformNone,s=void 0===i||i,d={},l={},u={},f=[];return function(e){return f.length=0,A(e,n,d,l,u,f,a,s),d}}var P=r({onRead:function(e,r){var t=r.element,n=r.preparseOutput,o=T(e);if(m(e))return o&&o.default||0;if(L.has(e))return t[e];var a=window.getComputedStyle(t,null).getPropertyValue(h(e,!0))||0;return n&&o&&o.test(a)&&o.parse?o.parse(a):a},onRender:function(e,r,t){var n=r.element,o=r.buildStyles,a=r.hasCSSVariable;if(Object.assign(n.style,o(e)),a)for(var i=t.length,s=0;s<i;s++){var d=t[s];d.startsWith("--")&&n.style.setProperty(d,e[d])}-1!==t.indexOf(C)&&(n[C]=e[C]),-1!==t.indexOf(R)&&(n[R]=e[R])},uncachedValues:L});var W=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),V=.5,Z=function(){return{style:{}}},H=function(e,r){return n.px.transform(e*r)},M={x:0,y:0,width:0,height:0};function z(e,r,t){return"string"==typeof e?e:n.px.transform(r+t*e)}var E={enableHardwareAcceleration:!1,isDashCase:!1};function N(e,r,t,n,o,a){void 0===r&&(r=M),void 0===n&&(n=B(E)),void 0===o&&(o=Z()),void 0===a&&(a=!0);var i,s,d=e.attrX,l=e.attrY,u=e.originX,f=e.originY,c=e.pathLength,p=e.pathSpacing,v=void 0===p?1:p,g=e.pathOffset,h=void 0===g?0:g,m=n(y.__rest(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var x in m){if("transform"===x)o.style.transform=m[x];else o[a&&!W.has(x)?b(x):x]=m[x]}return void 0===u&&void 0===f&&!m.transform||(o.style.transformOrigin=(s=void 0!==f?f:V,z(void 0!==u?u:V,(i=r).x,i.width)+" "+z(s,i.y,i.height))),void 0!==d&&(o.x=d),void 0!==l&&(o.y=l),void 0!==t&&void 0!==c&&(o[a?"stroke-dashoffset":"strokeDashoffset"]=H(-h,t),o[a?"stroke-dasharray":"strokeDasharray"]=H(c,t)+" "+H(v,t)),o}function q(e){var r=function(e){try{return"function"==typeof(r=e).getBBox?r.getBBox():r.getBoundingClientRect()}catch(e){return{x:0,y:0,width:0,height:0}}var r}(e),t="path"===e.tagName&&e.getTotalLength?e.getTotalLength():void 0;return j({element:e,buildAttrs:function(r,t,n){void 0===n&&(n=!0);var o=Z(),a=B(E);return function(e){return N(e,r,t,a,o,n)}}(r,t)})}function D(e,r){var t,n,o;return e===window?t=G(e):(o=e)instanceof HTMLElement||"function"==typeof o.click?t=function(e,r){void 0===r&&(r={});var t=r.enableHardwareAcceleration,n=r.allowTransformNone,o=y.__rest(r,["enableHardwareAcceleration","allowTransformNone"]);return P(y.__assign({element:e,buildStyles:B({enableHardwareAcceleration:t,allowTransformNone:n}),preparseOutput:!0},o))}(e,r):((n=e)instanceof SVGElement||"ownerSVGElement"in n)&&(t=q(e)),a.invariant(void 0!==t,"No valid node provided. Node must be HTMLElement, SVGElement or window."),F.set(e,t),t}var j=r({onRead:function(e,r){var t=r.element;if(m(e=W.has(e)?e:b(e))){var n=T(e);return n&&n.default||0}return t.getAttribute(e)},onRender:function(e,r){var t=r.element,n=(0,r.buildAttrs)(e);for(var o in n)"style"===o?Object.assign(t.style,n.style):t.setAttribute(o,n[o])}}),G=r({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var r=e.scrollTop,t=void 0===r?0:r,n=e.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,t)}}),F=new WeakMap;e.buildSVGAttrs=N,e.buildStyleProperty=A,e.createStylerFactory=r,e.default=function(e,r){var t,n,o="string"==typeof e?document.querySelector(e):e;return t=o,n=r,F.has(t)?F.get(t):D(t,n)},e.isTransformProp=m,e.transformProps=v,Object.defineProperty(e,"__esModule",{value:!0})});
