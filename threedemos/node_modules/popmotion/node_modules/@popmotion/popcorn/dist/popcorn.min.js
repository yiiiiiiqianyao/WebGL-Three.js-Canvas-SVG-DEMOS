!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.popcorn={})}(this,function(n){"use strict";var r,t={x:0,y:0,z:0},e=function(n){return"number"==typeof n},u=function(n){return 180*n/Math.PI},a=function(n){return function(r,t,e){return void 0!==e?n(r,t,e):function(e){return n(r,t,e)}}},o=a(function(n,r,t){return Math.min(Math.max(t,n),r)}),i=function(n){return n*Math.PI/180},f=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},c=function(n){return f(n)&&n.hasOwnProperty("z")},s=function(n,r){return Math.abs(n-r)},p=function(n,r,t){var e=r-n;return 0===e?1:(t-n)/e},h=function(n,r,t){return-t*n+t*r+n},d=function(){return(d=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n}).apply(this,arguments)},l=function(){return(l=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n}).apply(this,arguments)},m=function(n,r){return function(t){return Math.max(Math.min(t,r),n)}},v=function(n){return n%1?Number(n.toFixed(5)):n},y=/(-)?(\d[\d\.]*)/g,g=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,b=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,M={test:function(n){return"number"==typeof n},parse:parseFloat,transform:function(n){return n}},x=l(l({},M),{transform:m(0,1)}),w=(l(l({},M),{default:1}),r="%",{test:function(n){return"string"==typeof n&&n.endsWith(r)&&1===n.split(" ").length},parse:parseFloat,transform:function(n){return""+n+r}}),O=(l(l({},w),{parse:function(n){return w.parse(n)/100},transform:function(n){return w.transform(100*n)}}),m(0,255)),A=function(n){return void 0!==n.red},F=function(n){return void 0!==n.hue},I=function(n){return function(r){if("string"!=typeof r)return r;for(var t,e={},u=(t=r,t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))).split(/,\s*/),a=0;a<4;a++)e[n[a]]=void 0!==u[a]?parseFloat(u[a]):1;return e}},P=l(l({},M),{transform:function(n){return Math.round(O(n))}});function R(n,r){return n.startsWith(r)&&b.test(n)}var E={test:function(n){return"string"==typeof n?R(n,"rgb"):A(n)},parse:I(["red","green","blue","alpha"]),transform:function(n){var r=n.red,t=n.green,e=n.blue,u=n.alpha,a=void 0===u?1:u;return function(n){var r=n.red,t=n.green,e=n.blue,u=n.alpha;return"rgba("+r+", "+t+", "+e+", "+(void 0===u?1:u)+")"}({red:P.transform(r),green:P.transform(t),blue:P.transform(e),alpha:v(x.transform(a))})}},N={test:function(n){return"string"==typeof n?R(n,"hsl"):F(n)},parse:I(["hue","saturation","lightness","alpha"]),transform:function(n){var r=n.hue,t=n.saturation,e=n.lightness,u=n.alpha,a=void 0===u?1:u;return function(n){var r=n.hue,t=n.saturation,e=n.lightness,u=n.alpha;return"hsla("+r+", "+t+", "+e+", "+(void 0===u?1:u)+")"}({hue:Math.round(r),saturation:w.transform(v(t)),lightness:w.transform(v(e)),alpha:v(x.transform(a))})}},S=l(l({},E),{test:function(n){return"string"==typeof n&&R(n,"#")},parse:function(n){var r="",t="",e="";return n.length>4?(r=n.substr(1,2),t=n.substr(3,2),e=n.substr(5,2)):(r=n.substr(1,1),t=n.substr(2,1),e=n.substr(3,1),r+=r,t+=t,e+=e),{red:parseInt(r,16),green:parseInt(t,16),blue:parseInt(e,16),alpha:1}}}),j={test:function(n){return"string"==typeof n&&b.test(n)||A(n)||F(n)},parse:function(n){return E.test(n)?E.parse(n):N.test(n)?N.parse(n):S.test(n)?S.parse(n):n},transform:function(n){return A(n)?E.transform(n):F(n)?N.transform(n):n}},B=function(n){return"number"==typeof n?0:n},k={test:function(n){if("string"!=typeof n||!isNaN(n))return!1;var r=0,t=n.match(y),e=n.match(g);return t&&(r+=t.length),e&&(r+=e.length),r>0},parse:function(n){var r=n,t=[],e=r.match(g);e&&(r=r.replace(g,"${c}"),t.push.apply(t,e.map(j.parse)));var u=r.match(y);return u&&t.push.apply(t,u.map(M.parse)),t},createTransformer:function(n){var r=n,t=0,e=n.match(g),u=e?e.length:0;if(e)for(var a=0;a<u;a++)r=r.replace(e[a],"${c}"),t++;var o=r.match(y),i=o?o.length:0;if(o)for(a=0;a<i;a++)r=r.replace(o[a],"${n}"),t++;return function(n){for(var e=r,a=0;a<t;a++)e=e.replace(a<u?"${c}":"${n}",a<u?j.transform(n[a]):v(n[a]));return e}},getAnimatableNone:function(n){var r=k.parse(n);return k.createTransformer(n)(r.map(B))}},q=function(){};"production"!==process.env.NODE_ENV&&(q=function(n,r){if(!n)throw new Error(r)});var D=function(n,r,t){var e=n*n,u=r*r;return Math.sqrt(Math.max(0,t*(u-e)+e))},T=[S,E,N],U=function(n){return T.find(function(r){return r.test(n)})},$=function(n){return"'"+n+"' is not an animatable color. Use the equivalent color code instead."},z=function(n,r){var t=U(n),e=U(r);q(!!t,$(n)),q(!!e,$(r)),q(t.transform===e.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var u=t.parse(n),a=e.parse(r),o=d({},u),i=t===N?h:D;return function(n){for(var r in o)"alpha"!==r&&(o[r]=i(u[r],a[r],n));return o.alpha=h(u.alpha,a.alpha,n),t.transform(o)}},H=function(n,r){return function(t){return r(n(t))}},L=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.reduce(H)};function C(n,r){return e(n)?function(t){return h(n,r,t)}:j.test(n)?z(n,r):V(n,r)}var G=function(n,r){var t=n.slice(),e=t.length,u=n.map(function(n,t){return C(n,r[t])});return function(n){for(var r=0;r<e;r++)t[r]=u[r](n);return t}},W=function(n,r){var t=d({},n,r),e={};for(var u in t)void 0!==n[u]&&void 0!==r[u]&&(e[u]=C(n[u],r[u]));return function(n){for(var r in e)t[r]=e[r](n);return t}};function _(n){for(var r=k.parse(n),t=r.length,e=0,u=0,a=0,o=0;o<t;o++)e||"number"==typeof r[o]?e++:void 0!==r[o].hue?a++:u++;return{parsed:r,numNumbers:e,numRGB:u,numHSL:a}}var V=function(n,r){var t=k.createTransformer(r),e=_(n),u=_(r);return q(e.numHSL===u.numHSL&&e.numRGB===u.numRGB&&e.numNumbers>=u.numNumbers,"Complex values '"+n+"' and '"+r+"' too different to mix. Ensure all colors are of the same type."),L(G(e.parsed,u.parsed),t)},J=function(n,r){return function(t){return h(n,r,t)}};function K(n,r,t){for(var e,u=[],a=t||("number"==typeof(e=n[0])?J:"string"==typeof e?j.test(e)?z:V:Array.isArray(e)?G:"object"==typeof e?W:void 0),o=n.length-1,i=0;i<o;i++){var f=a(n[i],n[i+1]);if(r){var c=Array.isArray(r)?r[i]:r;f=L(c,f)}u.push(f)}return u}var Q=function(n,r){return void 0===r&&(r=2),r=Math.pow(10,r),Math.round(n*r)/r},X=function(n,r,t,e){return void 0===e&&(e=0),Q(n+t*(r-n)/Math.max(e,t))},Y=function(){};"production"!==process.env.NODE_ENV&&(Y=function(n,r){if(!n)throw new Error("Hey, listen! ".toUpperCase()+r)});var Z,nn=0,rn="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(n){return window.requestAnimationFrame(n)}:function(n){var r=Date.now(),t=Math.max(0,16.7-(r-nn));nn=r+t,setTimeout(function(){return n(nn)},t)};!function(n){n.Read="read",n.Update="update",n.Render="render",n.PostRender="postRender",n.FixedUpdate="fixedUpdate"}(Z||(Z={}));var tn=1/60*1e3,en=!0,un=!1,an=!1,on={delta:0,timestamp:0},fn=[Z.Read,Z.Update,Z.Render,Z.PostRender],cn=function(n){return un=n},sn=fn.reduce(function(n,r){var t,e,u,a,o,i,f,c,s,p=(t=cn,e=[],u=[],a=0,o=!1,i=0,f=new WeakSet,c=new WeakSet,s={cancel:function(n){var r=u.indexOf(n);f.add(n),-1!==r&&u.splice(r,1)},process:function(n){var r,p;if(o=!0,e=(r=[u,e])[0],(u=r[1]).length=0,a=e.length)for(i=0;i<a;i++)(p=e[i])(n),!0!==c.has(p)||f.has(p)||(s.schedule(p),t(!0));o=!1},schedule:function(n,r,t){void 0===r&&(r=!1),void 0===t&&(t=!1),Y("function"==typeof n,"Argument must be a function");var i=t&&o,s=i?e:u;f.delete(n),r&&c.add(n),-1===s.indexOf(n)&&(s.push(n),i&&(a=e.length))}});return n.sync[r]=function(n,r,t){return void 0===r&&(r=!1),void 0===t&&(t=!1),un||ln(),p.schedule(n,r,t),n},n.cancelSync[r]=function(n){return p.cancel(n)},n.steps[r]=p,n},{steps:{},sync:{},cancelSync:{}}),pn=sn.steps,hn=(sn.sync,sn.cancelSync,function(n){return pn[n].process(on)}),dn=function(n){un=!1,on.delta=en?tn:Math.max(Math.min(n-on.timestamp,40),1),en||(tn=on.delta),on.timestamp=n,an=!0,fn.forEach(hn),an=!1,un&&(en=!1,rn(dn))},ln=function(){un=!0,en=!0,an||rn(dn)},mn=function(n){return n},vn=function(n){return void 0===n&&(n=mn),a(function(r,t,e){var u=t-e,a=-(0-r+1)*(0-n(Math.abs(u)));return u<=0?t+a:t-a})},yn=vn(),gn=vn(Math.sqrt),bn=a(function(n,r,t){var e=r-n;return((t-n)%e+e)%e+n}),Mn=o(0,1),xn=function(n){return function(r){return 1-n(1-r)}},wn=function(n){return function(r){return r<=.5?n(2*r)/2:(2-n(2*(1-r)))/2}},On=function(n){return function(r){return Math.pow(r,n)}},An=function(n){return function(r){return r*r*((n+1)*r-n)}},Fn=function(n){var r=An(n);return function(n){return(n*=2)<1?.5*r(n):.5*(2-Math.pow(2,-10*(n-1)))}},In=On(2),Pn=xn(In),Rn=wn(In),En=function(n){return 1-Math.sin(Math.acos(n))},Nn=xn(En),Sn=wn(Nn),jn=An(1.525),Bn=xn(jn),kn=wn(jn),qn=Fn(1.525),Dn=8,Tn=.001,Un=1e-7,$n=10,zn=11,Hn=1/(zn-1),Ln="undefined"!=typeof Float32Array,Cn=function(n,r){return 1-3*r+3*n},Gn=function(n,r){return 3*r-6*n},Wn=function(n){return 3*n},_n=function(n,r,t){return 3*Cn(r,t)*n*n+2*Gn(r,t)*n+Wn(r)},Vn=function(n,r,t){return((Cn(r,t)*n+Gn(r,t))*n+Wn(r))*n};n.angle=function(n,r){return void 0===r&&(r=t),u(Math.atan2(r.y-n.y,r.x-n.x))},n.applyOffset=function(n,r){var t=!0;return void 0===r&&(r=n,t=!1),function(e){return t?e-n+r:(n=e,t=!0,r)}},n.clamp=o,n.conditional=function(n,r){return function(t){return n(t)?r(t):t}},n.degreesToRadians=i,n.distance=function(n,r){if(void 0===r&&(r=t),e(n)&&e(r))return s(n,r);if(f(n)&&f(r)){var u=s(n.x,r.x),a=s(n.y,r.y),o=c(n)&&c(r)?s(n.z,r.z):0;return Math.sqrt(Math.pow(u,2)+Math.pow(a,2)+Math.pow(o,2))}return 0},n.interpolate=function(n,r,t){var e=void 0===t?{}:t,u=e.clamp,a=void 0===u||u,i=e.ease,f=e.mixer,c=n.length;q(c===r.length,"Both input and output ranges must be the same length"),q(!i||!Array.isArray(i)||i.length===c-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),n[0]>n[c-1]&&(n=[].concat(n),r=[].concat(r),n.reverse(),r.reverse());var s=K(r,i,f),h=2===c?function(n,r){var t=n[0],e=n[1],u=r[0];return function(n){return u(p(t,e,n))}}(n,s):function(n,r){var t=n.length,e=t-1;return function(u){var a=0,o=!1;if(u<=n[0]?o=!0:u>=n[e]&&(a=e-1,o=!0),!o){for(var i=1;i<t&&!(n[i]>u||i===e);i++);a=i-1}var f=p(n[a],n[a+1],u);return r[a](f)}}(n,s);return a?L(o(n[0],n[c-1]),h):h},n.isPoint=f,n.isPoint3D=c,n.mix=h,n.mixArray=G,n.mixColor=z,n.mixComplex=V,n.mixObject=W,n.pipe=L,n.pointFromVector=function(n,r,t){return r=i(r),{x:t*Math.cos(r)+n.x,y:t*Math.sin(r)+n.y}},n.progress=p,n.radiansToDegrees=u,n.smooth=function(n){void 0===n&&(n=50);var r=0,t=0;return function(e){var u=on.timestamp,a=u!==t?u-t:0,o=a?X(r,e,a,n):r;return t=u,r=o,o}},n.smoothFrame=X,n.snap=function(n){if("number"==typeof n)return function(r){return Math.round(r/n)*n};var r=0,t=n.length;return function(e){var u=Math.abs(n[0]-e);for(r=1;r<t;r++){var a=n[r],o=Math.abs(a-e);if(0===o)return a;if(o>u)return n[r-1];if(r===t-1)return a;u=o}}},n.springForce=vn,n.springForceExpo=gn,n.springForceLinear=yn,n.steps=function(n,r){return void 0===r&&(r="end"),function(t){var e=(t="end"===r?Math.min(t,.999):Math.max(t,.001))*n,u="end"===r?Math.floor(e):Math.ceil(e);return Mn(u/n)}},n.toDecimal=Q,n.velocityPerFrame=function(n,r){return e(n)?n/(1e3/r):0},n.velocityPerSecond=function(n,r){return r?n*(1e3/r):0},n.wrap=bn,n.createAnticipateEasing=Fn,n.createBackIn=An,n.createExpoIn=On,n.cubicBezier=function(n,r,t,e){var u=Ln?new Float32Array(zn):new Array(zn),a=function(r){for(var e,a,o,i=0,f=1,c=zn-1;f!==c&&u[f]<=r;++f)i+=Hn;return e=(r-u[--f])/(u[f+1]-u[f]),(o=_n(a=i+e*Hn,n,t))>=Tn?function(r,e){for(var u=0,a=0;u<Dn;++u){if(0===(a=_n(e,n,t)))return e;e-=(Vn(e,n,t)-r)/a}return e}(r,a):0===o?a:function(r,e,u){var a,o,i=0;do{(a=Vn(o=e+(u-e)/2,n,t)-r)>0?u=o:e=o}while(Math.abs(a)>Un&&++i<$n);return o}(r,i,i+Hn)};return function(){for(var r=0;r<zn;++r)u[r]=Vn(r*Hn,n,t)}(),function(u){return n===r&&t===e?u:0===u?0:1===u?1:Vn(a(u),r,e)}},n.linear=function(n){return n},n.easeIn=In,n.easeOut=Pn,n.easeInOut=Rn,n.circIn=En,n.circOut=Nn,n.circInOut=Sn,n.backIn=jn,n.backOut=Bn,n.backInOut=kn,n.anticipate=qn,n.reversed=xn,n.mirrored=wn,Object.defineProperty(n,"__esModule",{value:!0})});
